<head>
  <title>Health Monitor</title>
  <script src="http://code.highcharts.com/highcharts.js"></script>
  <script src="http://code.highcharts.com/modules/exporting.js"></script>
</head>

<body>
</body>

<!-- Search Page Templates -->
<template name="home">
  <div id="maindiv">
    {{> navbar}}

    <div id="contentdiv">
      <div id="alertdiv">
        {{> alerts}}
      </div>
    </div>
  </div>
</template>

<template name="alerts">
  {{#each alert_list}}
    <a href="/patient/{{patient_id}}">
      <div class="alerts">
        <button type="button" class="close">X</button>
        {{message}} 
      </div>
    </a>
  {{/each}}
</template>

<!-- /Search Page Templates -->

<!-- Patient Page Templates -->

<template name="patient_page">

  <div id="maindiv">

    {{> navbar}}

    <br>

    <div id="contentdiv">
      <table id="patientinfo">
        <tr>
          <th></th>
          <th id="patientname">{{first_name}} &nbsp; {{last_name}}</th>
          <th></th>
        </tr>
        <tr>
          <td>Age: {{age}}</td>
          <td>Blood Type: {{blood_type}}</td>
          <td>Gender: {{gender}}</td>
        </tr>
      </table>

      <br>

      <div class="fixwidth">
        <div class="btn-group btn-group-justified">
          <div class="btn-group">
            <button id="bp" type="button" class="btn btn-default selected">Blood Pressure</button>
          </div>
          <div class="btn-group">
            <button id="hr" type="button" class="btn btn-default">Heart Rate</button>
          </div>
          <div class="btn-group">
            <button id="w" type="button" class="btn btn-default">Weight</button>
          </div>
        </div>
      </div>

      <div id="graphs-wrapper">
		{{> graphs}}      
		<div>
	<br><br><br>
          <select id="timeselect" class="form-control">
            <option value="1 year">1 year</option>
            <option value="6 months">6 months</option>
            <option value="1 month">1 month</option>
            <option value="1 week">1 week</option>
          </select>
	<br>
          <div class="center">
			<div id="medications">
          		{{> medications}}
          	</div>
          </div>
        </div>
      </div>
    </div>
  </div>

</template>

<!-- /Patient Page Templates -->

<!-- Graphs Template -->

<template name="graphs">
	<div id="graphs">
		<div id="graph-container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
		<div id="medicines-container" style="min-width: 310px; height: 400px; margin: 0 auto"></div>
	</div>  
</template>

<!-- /Graphs Template -->

<!-- Navbar Template -->

<template name="navbar">
	<nav class="navbar navbar-default" role="navigation">
		<div class="container-fluid">
			<table width="100%" class="fixed-layout">
				<tr>
					<td>
						<div class="navbar-header">
							<a class="brand" href="/">Health Monitor</a>
						</div>
					</td>
					<td>
						<div class="inblock">
						{{#if currentUser}}
							<form class="navbar-form" role="search">
								<div class="input-append">
									<input id="search" type="text" class="nav-search" placeholder="Search" required>
									<button id="go" type="submit" class="btn btn-default">Search</button>
								</div>	
							</form>
						{{/if}}
						</div>
					</td>
					<td>
						<div class="inblock pull-right">
							<ul class="nav navbar-nav">
								<li>
								{{#if currentUser}}
									<a id='logout' href="#">logout</a>
								{{else}} {{#if currentPage '/'}}
									<a href="/signup">sign up</a>
								{{else}}
									<a href="/">log in</a>
								{{/if}} {{/if}}
								</li>
							</ul>
						</div>
					</td>
				</tr>
			</table>
		</div>
	</nav>
</template>

<!-- End Navbar Template -->

<!-- Root Template -->

<template name="root">
	{{#if currentUser}}
		{{> home}}
	{{else}}
		{{> login}}
	{{/if}}
</template>

<!-- End Root Template -->

<!-- Login Template -->

<template name="login">
	{{> navbar}}
	<div class="center">
		<h2>Welcome to Health Monitor!</h2>
		<p>Health Monitor is the easiest way to view your patients' medical data.</p>
		<br>
		<div class="width-400">
			<form id="login-form" action="action">
		    	<div class="controls">
		    		<div id="login-error"></div>
		        	<input type="email" id="login-email" class="form-control mar-bot-15" placeholder="email" required>
			    	<br>
		        	<input type="password" id="login-password" class="form-control mar-bot-15" placeholder="password" required>
		    	</div>
			    <input type="submit" id="login-button" class="btn btn-primary pull-left" value="Log in" />
			    <p class="pull-right">Don't have an account? <a href="/signup">Sign Up!</a></p>
			</form>
		</div>
	</div>
</template>

<!-- End Login Template -->

<!-- Sign Up Template -->

<template name="signup">
	{{> navbar}}
	<div class="center">
		<h2>Welcome to Health Monitor!</h2>
		<p>Health Monitor is the easiest way to view your patients' medical data.</p>
		<br>
		<div class="width-400">
			<form id="signup-form" action="action">
		    	<div class="controls">
		    		<div id="signup-error"></div>
		        	<input type="email" id="signup-email" class="form-control mar-bot-15" placeholder="email" required>
			    	<br>
		        	<input type="password" id="signup-password" class="form-control mar-bot-15" placeholder="password" required>
		        	<br>
		        	<input type="password" id="signup-confirm-password" class="form-control mar-bot-15" placeholder="confirm password" required>
		    	</div>
		    	<input type="submit" id="create-account" class="btn btn-primary pull-left" value="Sign up" />
		    	<p class="pull-right">Already have an account? <a href="/">Log in!</a></p>
		    </form>
		</div>
	</div>
</template>

<!-- End Sign Up Template -->

<!-- Medications Templates -->

<template name="medications">
	<table id="medtable" class="table">
		<thead>
			<tr>
				<th colspan="5" class="theader bigfont center">Current Medications</th>
				<td colspan="2" class="theader">
					<div class="popover-markup"> 
						<button id="prescribe" type="button popover-markup" class="btn btn-primary trigger" data-placement="top">Prescribe New</button>
						<div class="head hide">Prescribe New Medication</div>
						<div class="content hide">
							<div class="form-group">
								<form id="medication-form" action="action">
									<input id='med-name' type="text" class="form-control norm" size="56" placeholder="Name of Medication" required>
									<div class="form-horizontal">
										<input id='med-dose' type="text" class="form-control norm mar-right" size="4" placeholder="0" required>
										<select id='med-dose-unit' class="form-control norm mar-right">
											<option value="ml">ml</option>
											<option value="mg">mg</option>
											<option value="tbsp">tbsp</option>
										</select>
										every
										<input id='med-freq' type="text" class="form-control norm mar-right mar-left" size="4" placeholder="0" required>
										<select id='med-freq-unit' class="form-control norm">
											<option value="hrs">hrs</option>
											<option value="days">days</option>
											<option value="weeks">weeks</option>
										</select>	 
									</div>
									<input id='med-reason' type="text" class="form-control norm" size="56" placeholder="Reason">
									<textarea id='med-comment' class="form-control norm" cols="56" placeholder="Comment..."></textarea> 
									<button id="add-med" type="button" class="btn btn-default btn-block">Add</button>
								</form>
							</div>
						</div>
					</div>
				</td>
			</tr>
			<tr>
				<th>&nbsp;</th>
				<th>&nbsp;</th>
				<th>Name</th>
				<th>Dose</th>
				<th>Prescribed By</th>
				<th>Reason</th>
				<th>Comment</th>
			</tr>
		</thead>
		<tbody>
		{{#each current_medications}}
			{{> medication}}
		{{/each}}
		</tbody>
	</table>
</template>


<template name="medication">
	<tr>
		<td><a href="#" class="disabled edit">edit</a></td>
		<td><a href="#" class="disabled discontinue">discontinue</a></td>
		<td>{{name}}</td>
		<td>{{dose}} {{dose_unit}} every {{frequency}} {{frequency_unit}}</td>
		<td>Dr. {{doctor_name doctor_id}}</td>
		<td>{{reason}}</td>
		<td>{{comment}}</td>
	</tr>
</template>

<!-- End Medications Templates -->
